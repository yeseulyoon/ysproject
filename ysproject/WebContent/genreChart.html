<!DOCTYPE html>
<html>
<meta charset="UTF-8">
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
        data.addColumn('string', '장르');
        data.addColumn('number', '장르별 데이터 개수');  
        data.addRows(dataView);
        
        var options = {
                title: 'YSmusic 3D Pie chart by Genre ',
                is3D: true,
        };
        ['장르', '장르별 데이터 개수'],
          ['발라드',     9],
          ['펑키',      1],
          ['리듬',  1],
          ['성악', 3],
          ['팝',    1]
          ['포크',  1]	
        ]);

        var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
        chart.draw(data, options);
      }
    </script>
  </head>
  
  <body>
    <div id="piechart_3d" style="width: 900px; height: 500px;"></div>
    <button onclick="ajaxChart()">차트 그리기</button>
    <script type="text/javascript">
    function ajaxChart() {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				dataView = this.responseText;
				//js의 배열로 변환
				dataView = eval(dataView);
				google.charts.load('current', {'packages':['corechart']});

			    google.charts.setOnLoadCallback(drawChart);
			}
		};
		xhttp.open("GET", "jsonHandling.jsp", true);
		xhttp.send();
	}
    </script>
  </body>
</html>